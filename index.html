<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stillnight â€“ Win 3.1 Stack (Enhanced)</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="desktop">
    <div class="win-window">
        <div class="title-bar">
            <div class="title-group">
                <div class="title-icon"></div>
                <div class="title">Stillnight â€“ Windows 3.1 Stack</div>
            </div>
            <div class="sys-buttons">
                <button class="win-btn" id="btn-theme" title="Theme">ðŸŽ¨</button>
                <button class="win-btn" title="Minimize">_</button>
                <button class="win-btn" title="Maximize">â–¢</button>
                <button class="win-btn" title="Close">X</button>
            </div>
        </div>

        <div class="window-content">
            <!-- Left side: stack + run controls -->
            <div class="stack-nav panel">
                <h1>Stillnight Stack</h1>

                <div class="group-box">
                    <legend>Run</legend>
                    <div class="stack-nav-buttons">
                        <button class="win-btn" id="btn-new-run">New Run</button>
                        <button class="win-btn" id="btn-reveal-all">Reveal</button>
                    </div>
                    <div style="margin-top:4px;">
                        <div>Card: <span id="card-index-label">1 / 1</span></div>
                        <div>Floor depth: <span id="card-depth-label">1</span></div>
                    </div>
                </div>

                <div class="group-box">
                    <legend>Cards (Floors)</legend>
                    <div class="card-list" id="card-list"></div>
                </div>

                <div class="group-box">
                    <legend>Short Help</legend>
                    <div class="info-box">
                        â€¢ Each floor is a card.<br>
                        â€¢ â˜º is your party (highlighted).<br>
                        â€¢ Click adjacent tiles to move.<br>
                        â€¢ E triggers a battle.<br>
                        â€¢ R heals, S descends.<br>
                        â€¢ Â¥ opens a shop.<br>
                        â€¢ Front row hits harder,<br>
                        &nbsp;&nbsp;back row is safer.<br>
                        â€¢ Floors are reachable only<br>
                        &nbsp;&nbsp;if you've reached their<br>
                        &nbsp;&nbsp;stairs at least once.<br>
                        â€¢ Shrines may offer<br>
                        &nbsp;&nbsp;mysterious events.<br>
                        â€¢ Boss awaits at the deepest floor.
                    </div>
                </div>
            </div>

            <!-- Right side: exploration card + party/log -->
            <div class="right-side">
                <div class="card-area">
                    <!-- Main â€œcardâ€ -->
                    <div class="card-main panel">
                        <div class="card-header">
                            <div>
                                <span class="card-header-title" id="card-title">Floor 1</span>
                            </div>
                            <div>
                                <span class="label">Mode:</span>
                                <span id="mode-label">Exploration</span>
                            </div>
                        </div>

                        <div class="exploration-frame panel">
                            <div class="exploration-grid" id="exploration-grid"></div>
                            <div class="legend">
                                <span>â˜º = Party</span>
                                <span>â–ˆ = Wall</span>
                                <span>E = Enemy</span>
                                <span>R = Recovery</span>
                                <span>S = Stairs</span>
                                <span>â™± = Shrine</span>
                                <span>Â¥ = Shop</span>
                                <span>? = Unseen</span>
                    <span>U = Recruit</span>
                            </div>
                        </div>
                    </div>

                    <!-- Party + log (fixed width column) -->
                    <div class="card-side-panels">
                        <div class="party-panel panel">
                            <div style="display:flex; justify-content:space-between; align-items:center;">
                                <span>Party Status (click to inspect)</span>
                                <button class="win-btn" style="font-size:10px; padding:0 6px;" id="btn-formation">
                                    Formation...
                                </button>
                                <button class="win-btn" style="font-size:10px; padding:0 6px;" id="btn-inventory">
                                    Inventory...
                                </button>
                            </div>
                            <div class="party-grid" id="party-grid"></div>
                        </div>

                        <div class="log-panel panel">
                            <div style="display:flex; justify-content:space-between; align-items:center;">
                                <span>Event Log</span>
                                <button class="win-btn" style="font-size:10px; padding:0 6px;" id="btn-clear-log">
                                    Clear
                                </button>
                            </div>
                            <div class="log-content" id="log-content"></div>
                        </div>
                    </div>
                </div>

                <div class="status-bar">
                    <div>
                        <span id="status-message">Ready.</span>
                    </div>
                    <div>
                        <span>Gold: <span id="status-gold">0</span></span>
                        <span>| Floor: <span id="status-floor">1</span></span>
                        <span>| Cards: <span id="status-cards">1</span></span>
                        <span>| Run: <span id="status-run">Active</span></span>
                        <span>| Items: <span id="status-items">0</span></span>
                    </div>
                </div>
            </div>
        </div>

        <div id="window-container"></div>
    </div>
</div>

<script type="module" src="main.js"></script>
</body>
</html>