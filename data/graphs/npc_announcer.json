{
  "id": "npc_announcer",
  "name": "System",
  "layout": "visual_novel",
  "portrait": "NPC_Computer",
  "initialNode": "root_router",
  "nodes": {
    "root_router": {
      "type": "ROUTER",
      "branches": [
         { "condition": "questStatus:self_destruct:completed", "target": "quest_completed_text" },
         { "condition": "questStatus:self_destruct:active", "target": "quest_active_text" }
      ],
      "next": "quest_offer_text"
    },
    "quest_offer_text": {
      "type": "TEXT",
      "speaker": "System",
      "content": "WARNING. SELF-DESTRUCT SEQUENCE INITIATED. ALL PERSONNEL EVACUATE IMMEDIATELY.",
      "next": "action_offer_quest"
    },
    "action_offer_quest": {
      "type": "ACTION",
      "action": "OFFER_QUEST",
      "questId": "self_destruct",
      "acceptNode": "quest_active_text",
      "declineNode": "quest_offer_text"
    },
    "quest_active_text": {
      "type": "TEXT",
      "speaker": "System",
      "content": "TIME TO DETONATION: 10 MINUTES. PROCEED TO THE EMERGENCY TRAIN PLATFORM.",
      "next": "quest_active_router"
    },
    "quest_active_router": {
      "type": "ROUTER",
      "condition": "flag:reached_platform",
      "trueNode": "quest_turnin_text",
      "falseNode": "quest_exit"
    },
    "quest_exit": {
        "type": "CHOICE",
        "options": [{ "label": "Run!", "action": "close" }]
    },
    "quest_turnin_text": {
      "type": "TEXT",
      "speaker": "System",
      "content": "PLATFORM ACCESSED. TRAIN DEPARTING.",
      "next": "action_complete_quest"
    },
    "action_complete_quest": {
      "type": "ACTION",
      "action": "COMPLETE_QUEST",
      "questId": "self_destruct",
      "completeNode": "quest_completed_text"
    },
    "quest_completed_text": {
      "type": "TEXT",
      "speaker": "System",
      "content": "HAVE A NICE DAY.",
      "next": "quest_completed_choices"
    },
    "quest_completed_choices": {
       "type": "CHOICE",
       "options": [{ "label": "Go!", "action": "close" }]
    }
  }
}
