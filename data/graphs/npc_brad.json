{
  "id": "npc_brad",
  "name": "Brad",
  "layout": "visual_novel",
  "portrait": "NPC_Brad",
  "initialNode": "root_router",
  "nodes": {
    "root_router": {
      "type": "ROUTER",
      "branches": [
         { "condition": "questStatus:sanctuary:completed", "target": "quest_completed_text" },
         { "condition": "questStatus:sanctuary:active", "target": "quest_active_text" }
      ],
      "next": "quest_offer_text"
    },
    "quest_offer_text": {
      "type": "TEXT",
      "speaker": "Brad",
      "content": "Is anyone there? This is Vickers! Alpha Team! It's chaos out here! Listen, if you can hear me, get to the station! It's the only safe place left!",
      "next": "quest_offer_choices"
    },
    "quest_offer_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "Roger that.", "target": "action_offer_quest" }
      ]
    },
    "action_offer_quest": {
      "type": "ACTION",
      "action": "OFFER_QUEST",
      "questId": "sanctuary",
      "acceptNode": "quest_active_text",
      "declineNode": "quest_offer_choices"
    },
    "quest_active_text": {
      "type": "TEXT",
      "speaker": "Brad",
      "content": "Keep moving! Don't let them get close! I'm heading to the R.P.D. courtyard. Meet me there!",
      "next": "quest_active_router"
    },
    "quest_active_router": {
      "type": "ROUTER",
      "condition": "flag:reached_rpd",
      "trueNode": "quest_turnin_text",
      "falseNode": "quest_exit"
    },
    "quest_exit": {
        "type": "CHOICE",
        "options": [{ "label": "Copy.", "action": "close" }]
    },
    "quest_turnin_text": {
      "type": "TEXT",
      "speaker": "Brad",
      "content": "You made it... barely. They're everywhere. We need to get inside.",
      "next": "action_complete_quest"
    },
    "action_complete_quest": {
      "type": "ACTION",
      "action": "COMPLETE_QUEST",
      "questId": "sanctuary",
      "completeNode": "quest_completed_text"
    },
    "quest_completed_text": {
      "type": "TEXT",
      "speaker": "Brad",
      "content": "I hear something... something big. Stay away from me! Stay away!",
      "next": "quest_completed_choices"
    },
    "quest_completed_choices": {
       "type": "CHOICE",
       "options": [{ "label": "Brad?", "action": "close" }]
    }
  }
}
