{
  "id": "npc_ada",
  "name": "Ada",
  "layout": "visual_novel",
  "portrait": "NPC_Ada",
  "initialNode": "root_router",
  "nodes": {
    "root_router": {
      "type": "ROUTER",
      "branches": [
         { "condition": "questStatus:cable_car:completed", "target": "quest2_completed_text" },
         { "condition": "questStatus:cable_car:active", "target": "quest2_active_text" },
         { "condition": "questStatus:sewer_navigation:completed", "target": "quest2_offer_text" },
         { "condition": "questStatus:sewer_navigation:active", "target": "quest1_active_text" }
      ],
      "next": "quest1_offer_text"
    },
    "quest1_offer_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "You're persistent, I'll give you that. I'm Ada Wong. FBI. If you want to survive, you'll help me.",
      "next": "quest1_offer_choices"
    },
    "quest1_offer_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "FBI? What's going on?", "target": "quest1_explanation" },
        { "label": "Fine.", "target": "action_offer_quest1" }
      ]
    },
    "quest1_explanation": {
       "type": "TEXT",
       "speaker": "Ada",
       "content": "Umbrella caused this. And I'm going to prove it. Now, are you coming or not?",
       "next": "quest1_offer_choices"
    },
    "action_offer_quest1": {
      "type": "ACTION",
      "action": "OFFER_QUEST",
      "questId": "sewer_navigation",
      "acceptNode": "quest1_active_text",
      "declineNode": "quest1_offer_choices"
    },
    "quest1_active_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "We need to get to the NEST facility. The entrance is through the sewers, but the water level is too high. Find the control room key.",
      "next": "quest1_active_router"
    },
    "quest1_active_router": {
      "type": "ROUTER",
      "condition": "flag:sewer_key_found",
      "trueNode": "quest1_turnin_text",
      "falseNode": "quest1_exit"
    },
    "quest1_exit": {
        "type": "CHOICE",
        "options": [{ "label": "Leave", "action": "close" }]
    },
    "quest1_turnin_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "Good work. Now we can proceed.",
      "next": "action_complete_quest1"
    },
    "action_complete_quest1": {
      "type": "ACTION",
      "action": "COMPLETE_QUEST",
      "questId": "sewer_navigation",
      "completeNode": "quest2_offer_text"
    },

    "quest2_offer_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "The cable car is our ticket down. But it's powered down. We need the electronic plugs. King and Queen.",
      "next": "quest2_offer_choices"
    },
    "quest2_offer_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "I'll handle it.", "target": "action_offer_quest2" }
      ]
    },
    "action_offer_quest2": {
      "type": "ACTION",
      "action": "OFFER_QUEST",
      "questId": "cable_car",
      "acceptNode": "quest2_active_text",
      "declineNode": "quest2_offer_choices"
    },
    "quest2_active_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "Don't take too long. This place isn't stable.",
      "next": "quest2_active_router"
    },
    "quest2_active_router": {
      "type": "ROUTER",
      "condition": "flag:plugs_found",
      "trueNode": "quest2_turnin_text",
      "falseNode": "quest2_exit"
    },
    "quest2_exit": {
        "type": "CHOICE",
        "options": [{ "label": "Leave", "action": "close" }]
    },
    "quest2_turnin_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "Power restored. Let's go. We're getting close to the truth.",
      "next": "action_complete_quest2"
    },
    "action_complete_quest2": {
      "type": "ACTION",
      "action": "COMPLETE_QUEST",
      "questId": "cable_car",
      "completeNode": "quest2_completed_text"
    },
    "quest2_completed_text": {
      "type": "TEXT",
      "speaker": "Ada",
      "content": "Stay sharp. The lab is heavily guarded.",
      "next": "quest2_completed_choices"
    },
    "quest2_completed_choices": {
       "type": "CHOICE",
       "options": [{ "label": "Right behind you.", "action": "close" }]
    }
  }
}
