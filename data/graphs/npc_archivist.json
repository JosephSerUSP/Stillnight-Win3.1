{
  "id": "npc_archivist",
  "name": "Data Archivist",
  "layout": "visual_novel",
  "portrait": "NPC_Archivist",
  "initialNode": "intro_text",
  "nodes": {
    "intro_text": {
      "type": "TEXT",
      "speaker": "Data Archivist",
      "content": "Be careful. The data streams are... unstable today. I've detected an anomaly, a faint echo of a forgotten User.",
      "next": "intro_choices"
    },
    "intro_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "What is this 'anomaly'?", "target": "quest_offer_text" },
        { "label": "Leave", "action": "close" }
      ]
    },
    "quest_offer_text": {
      "type": "TEXT",
      "speaker": "Data Archivist",
      "content": "It's a fragment of memory, a data-echo. I need someone to find its source. It could be dangerous, but it could also hold the key to understanding what happened to this world. Will you help?",
      "next": "quest_offer_choices"
    },
    "quest_offer_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "I'll investigate.", "target": "action_offer_quest" },
        { "label": "I'm not interested.", "target": "intro_text" }
      ]
    },
    "action_offer_quest": {
      "type": "ACTION",
      "action": "OFFER_QUEST",
      "questId": "a_glimmer_of_the_past",
      "acceptNode": "quest_active_text",
      "declineNode": "intro_text"
    },
    "quest_active_text": {
      "type": "TEXT",
      "speaker": "Data Archivist",
      "content": "The echo is strongest in the lower levels. Look for a... distortion. A place where the data doesn't quite line up. Be wary of the Glitches. They are drawn to these echoes.",
      "next": "quest_active_router"
    },
    "quest_active_router": {
      "type": "ROUTER",
      "condition": "hasItem:echo_fragment",
      "trueNode": "quest_turnin_text",
      "falseNode": "quest_active_choices"
    },
    "quest_active_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "I'm still looking.", "action": "close" }
      ]
    },
    "quest_turnin_text": {
      "type": "TEXT",
      "speaker": "Data Archivist",
      "content": "You've found it! This is... incredible. This fragment contains memories, emotions... a piece of a forgotten life. This is just the beginning. Thank you.",
      "next": "quest_turnin_choices"
    },
    "quest_turnin_choices": {
      "type": "CHOICE",
      "options": [
        { "label": "Here you go.", "target": "action_complete_quest" }
      ]
    },
    "action_complete_quest": {
      "type": "ACTION",
      "action": "COMPLETE_QUEST",
      "questId": "a_glimmer_of_the_past",
      "completeNode": "quest_completed_text"
    },
    "quest_completed_text": {
      "type": "TEXT",
      "speaker": "Data Archivist",
      "content": "There are more of these fragments out there. I can feel it. If we can gather them, we might be able to piece together the truth.",
      "next": "intro_text"
    }
  }
}
