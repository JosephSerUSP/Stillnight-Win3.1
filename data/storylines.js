export const storylines = [
  {
    id: "main_arc",
    title: "Veilfall Descent",
    overview:
      "Breach the Stillnight Sanctum, forge the sigil that can wake or end the Eternal Warden, and shepherd the townsfolk's hopes through the dark.",
    steps: [
      {
        id: "oath",
        title: "Accept the Vigil",
        description: "Promise the town you will descend and return with answers.",
        trigger: { type: "run_started" },
        log: "You promise Alencar you'll return with the Warden's truth.",
      },
      {
        id: "entry_hall",
        title: "Scout the Entry Hall",
        description: "Map the first floor so the surface has a path to follow.",
        trigger: { type: "reach_floor", depth: 1 },
        reward: { xp: 3 },
        log: "The first map sketch steadies the town's nerves.",
      },
      {
        id: "nightglass",
        title: "Claim the Nightglass Shard",
        description: "Recover the fossilized shard whispered about in the Entry Hall.",
        trigger: { type: "action", id: "nightglass_cache" },
        log: "A shard of fossilized night hums with contained dawnlight.",
      },
      {
        id: "bram_plan",
        title: "Bring the shard to Bram",
        description: "Let the weaponsmith chart a way to house the shard's power.",
        trigger: { type: "npc", id: "bram", requiresItem: "nightglass_shard" },
        consumeItems: ["nightglass_shard"],
        reward: { items: ["warded_mold"] },
        log: "Bram tempers the shard into a warded mold that needs a perfect setting.",
      },
      {
        id: "radiant_band",
        title: "Recover the Radiant Band",
        description: "Find the ring of sun-gold the gossiping merchant promised could focus the mold.",
        trigger: { type: "action", id: "radiant_band_cache" },
        log: "The band still carries the warmth of its last bearer.",
      },
      {
        id: "laura_setting",
        title: "Ask Laura to weigh the band",
        description: "Laura's goldsmithing can keep the band from cracking under the mold's heat.",
        trigger: { type: "npc", id: "laura", requiresItem: "radiant_band" },
        reward: { items: ["gleaming_setting"], gold: 15 },
        log: "Laura shapes a gleaming setting that can clasp Bram's mold without shattering it.",
      },
      {
        id: "sigil_forged",
        title: "Forge the Warden Sigil",
        description: "Combine Bram's mold and Laura's setting to forge the sigil.",
        trigger: { type: "npc", id: "bram", requiresItems: ["warded_mold", "gleaming_setting"] },
        consumeItems: ["warded_mold", "gleaming_setting"],
        reward: { items: ["warden_sigil"], xp: 6 },
        log: "The sigil's pulse syncs with your heartbeat. It will open the Sanctum or doom it.",
      },
      {
        id: "sanctum_gate",
        title: "Carry the sigil into the Sanctum",
        description: "Descend to the Sanctum with the sigil to face the Eternal Warden.",
        trigger: { type: "reach_floor", depth: 7, requiresItem: "warden_sigil" },
        reward: { gold: 60 },
        log: "The Sanctum's doors yield. The Warden knows your name now.",
      },
    ],
  },
  {
    id: "alicia_arc",
    title: "Alicia's Bravery",
    overview:
      "Alicia pours every ounce of sweetness into tonics for the friend she loves, and needs the dungeon's rare herbs to find her courage.",
    steps: [
      {
        id: "meet_alicia",
        title: "Check on Alicia",
        description: "Hear Alicia admit she wants Laura to notice her efforts.",
        trigger: { type: "npc", id: "alicia" },
        log: "Alicia vows to brew something that says what words can't.",
      },
      {
        id: "luminous_petal",
        title: "Gather Luminous Petals",
        description: "Find petals that only bloom in the Entry Hall's cracks.",
        trigger: { type: "action", id: "luminous_cache" },
        log: "Your satchel glows with soft, rose-colored light.",
      },
      {
        id: "brew_courage",
        title: "Deliver the petals",
        description: "Hand the petals to Alicia so she can brew courage in a bottle.",
        trigger: { type: "npc", id: "alicia", requiresItem: "luminous_petal" },
        consumeItems: ["luminous_petal"],
        reward: { items: ["hp_tonic", "hp_tonic"], gold: 10 },
        log: "Alicia's laughter steadies. She presses a pair of warm tonics into your hands.",
      },
      {
        id: "orchid_hunt",
        title: "Harvest a Sunless Orchid",
        description: "Find the orchid that blooms only in the blood-lit halls.",
        trigger: { type: "action", id: "sunless_orchid_cache" },
        log: "The orchid's perfume clings to your gloves.",
      },
      {
        id: "confession_tonic",
        title: "Bring Alicia the orchid",
        description: "Return the orchid so Alicia can brew the tonic she swears will let her speak plainly to Laura.",
        trigger: { type: "npc", id: "alicia", requiresItem: "sunless_orchid" },
        consumeItems: ["sunless_orchid"],
        reward: { items: ["sigil_ink"], gold: 15 },
        log: "Alicia smiles through tears. She promises to tell Laura the truth once you return from the Sanctum.",
      },
    ],
  },
  {
    id: "laura_arc",
    title: "Laura's Honesty",
    overview:
      "Laura hides her fear of the future behind easy charm. Rare metals from the depths force her to choose what to keep and what to let go.",
    steps: [
      {
        id: "meet_laura",
        title: "Share a drink with Laura",
        description: "Let Laura confess she's tired of pretending nothing scares her.",
        trigger: { type: "npc", id: "laura" },
        log: "Laura clinks cups with you and admits she's scared of the wedding she planned years ago.",
      },
      {
        id: "band_memory",
        title: "Recover the Radiant Band",
        description: "Find the band she lost while arguing with Raphael in the depths.",
        trigger: { type: "action", id: "radiant_band_cache" },
        log: "The band still has the faint imprint of a hand that hesitated.",
      },
      {
        id: "decide_future",
        title: "Return the band to Laura",
        description: "Give Laura the band so she can decide whether it means goodbye or a promise remade.",
        trigger: { type: "npc", id: "laura", requiresItem: "radiant_band" },
        reward: { items: ["light_amulet"], gold: 10 },
        log: "Laura slips the band into a pouch. She'll talk to Raphael after you face the Warden.",
      },
      {
        id: "sigil_support",
        title: "Let Laura bless the Sigil",
        description: "Show her the finished Warden Sigil so she can etch a promise into it.",
        trigger: { type: "npc", id: "laura", requiresItem: "warden_sigil" },
        reward: { xp: 4 },
        log: "Laura traces a sunburst on the sigil. She says, \"Come back with this, and I'll carve my own ending.\"",
      },
    ],
  },
  {
    id: "bram_arc",
    title: "Bram's Craft",
    overview:
      "Bram sharpens steel to keep from dwelling on the families Stillnight has taken. He needs exotic ore to re-learn pride in his craft.",
    steps: [
      {
        id: "meet_bram",
        title: "Check Bram's forge",
        description: "Hear Bram admit he's ashamed of outfitting both heroes and deserters.",
        trigger: { type: "npc", id: "bram" },
        log: "Bram swears he'll only forge for those who face the dark.",
      },
      {
        id: "chasm_ore",
        title: "Bring back Chasm Ore",
        description: "Gather ore that can take an edge better than steel.",
        trigger: { type: "action", id: "chasm_ore_cache" },
        log: "The ore thrums when you hold it near the forge's coals.",
      },
      {
        id: "forge_edge",
        title: "Hand Bram the ore",
        description: "Deliver the ore so Bram can forge something worthy of your descent.",
        trigger: { type: "npc", id: "bram", requiresItem: "chasm_ore" },
        consumeItems: ["chasm_ore"],
        reward: { items: ["silver_blade"], gold: 15 },
        log: "Bram presses a rebalanced blade into your hands and thanks you for trusting him.",
      },
      {
        id: "embered_alloy",
        title: "Find Embered Alloy",
        description: "Collect the alloy burning beneath the blood-lit halls.",
        trigger: { type: "action", id: "embered_alloy_cache" },
        log: "Heat clings to the alloy long after it's pocketed.",
      },
      {
        id: "steady_hand",
        title: "Temper Bram's doubts",
        description: "Give Bram the alloy so he can finish reforging his reputation.",
        trigger: { type: "npc", id: "bram", requiresItem: "embered_alloy" },
        consumeItems: ["embered_alloy"],
        reward: { items: ["bone_plate"], xp: 3 },
        log: "Bram straightens his shoulders. His work sings again.",
      },
    ],
  },
  {
    id: "mara_arc",
    title: "Mara's Masks",
    overview:
      "Mara auctions hope to fund her own debts. She needs relics from below to keep her ledgers honest and her heart open.",
    steps: [
      {
        id: "meet_mara",
        title: "Trade gossip with Mara",
        description: "Mara jokes about selling secrets, but you can tell the debts weigh on her.",
        trigger: { type: "npc", id: "mara" },
        log: "Mara says the right relic could pay off everyone who waits on her doorstep.",
      },
      {
        id: "antique_emblem",
        title: "Recover the Antique Emblem",
        description: "Find the emblem Mara pawned years ago to keep her doors open.",
        trigger: { type: "action", id: "antique_emblem_cache" },
        log: "The emblem's crest is worn smooth by desperate hands.",
      },
      {
        id: "settle_dues",
        title: "Return the emblem",
        description: "Give Mara the emblem so she can wipe the slate clean.",
        trigger: { type: "npc", id: "mara", requiresItem: "antique_emblem" },
        consumeItems: ["antique_emblem"],
        reward: { gold: 40 },
        log: "Mara exhales. She tears up old IOUs and offers you a cut of her freed future.",
      },
      {
        id: "sealed_ledger",
        title: "Find the Sealed Ledger",
        description: "Unearth the ledger of names that would expose who profited from the Sanctum.",
        trigger: { type: "action", id: "sealed_ledger_cache" },
        log: "Pages crinkle with names and payouts, proof of quiet betrayals.",
      },
      {
        id: "set_truth_free",
        title: "Choose what to do with the ledger",
        description: "Give Mara the ledger so she can auction truth or burn it.",
        trigger: { type: "npc", id: "mara", requiresItem: "sealed_ledger" },
        consumeItems: ["sealed_ledger"],
        reward: { items: ["whispered_lessons"], gold: 20 },
        log: "Mara swears the names will only see daylight if the town needs them.",
      },
    ],
  },
];
