{
  "npc_alicia": {
    "name": "Alicia",
    "layout": "visual_novel",
    "portrait": "NPC_Alicia",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Oh! H-hello there! I... I didn't see you coming! I'm Alicia... welcome to my shop! Uhm... please look around!",
        "choices": [
          {
            "label": "Buy Consumables",
            "action": "shop",
            "shopId": "consumables_basic"
          },
          {
            "label": "Talk about Laura",
            "nextState": "talk_laura"
          },
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      },
      "talk_laura": {
        "text": "Have you seen Laura around? She's... she's so amazing, isn't she? *sigh* Sometimes I wonder if... oh! Nevermind! People say weird things about us, but she's just teasing! She's been with Raphael for 7 years... I just want her to be happy.",
        "choices": [
          {
            "label": "Ask about Quest",
            "nextState": "quest_router"
          },
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      },
      "quest_router": {
        "condition": "questStatus:sparkling_gift:completed",
        "trueState": "quest_complete",
        "falseState": "quest_offer_router"
      },
      "quest_offer_router": {
        "condition": "questStatus:sparkling_gift:active",
        "trueState": "quest_active",
        "falseState": "quest_offer"
      },
      "quest_offer": {
        "text": "Actually... could you help me find something for her? She loves sparkly things. Maybe if I gave her something special...",
        "choices": [
          {
            "label": "Hear the request",
            "action": "quest",
            "questId": "sparkling_gift",
            "acceptState": "quest_active",
            "declineState": "talk_laura"
          },
          {
            "label": "Maybe later",
            "nextState": "default"
          }
        ]
      },
      "quest_active": {
        "text": "You'll know it when you see it — a Glittering Teardrop. Merchants whisper about them; please bring one back for me.",
        "condition": "hasItem:glittering_teardrop",
        "trueState": "quest_turnin",
        "choices": [
          {
            "label": "Review quest details",
            "action": "quest",
            "questId": "sparkling_gift"
          },
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      },
      "quest_turnin": {
        "text": "Oh! Is that for Laura? It's perfect. May I have it?",
        "choices": [
          {
            "label": "Hand over the teardrop",
            "action": "questComplete",
            "questId": "sparkling_gift",
            "completeState": "quest_complete"
          },
          {
            "label": "Not yet",
            "nextState": "quest_active"
          }
        ]
      },
      "quest_complete": {
        "text": "Thank you! Laura will love this. I owe you so much... here, take this as thanks.",
        "choices": [
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      }
    }
  },
  "npc_laura": {
    "name": "Laura",
    "layout": "visual_novel",
    "portrait": "NPC_Laura",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Well, hello there, darling. Looking for something shiny, or just admiring the view? I'm Laura, the best goldsmith you'll ever meet.",
        "choices": [
          {
            "label": "Browse Accessories",
            "action": "shop",
            "shopId": "accessories_special"
          },
          {
            "label": "Talk",
            "nextState": "talk_intro"
          },
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      },
      "talk_intro": {
        "text": "Alicia? Oh, she's a sweet little thing, isn't she? A bit clumsy, but she means well. Don't let her fragility fool you though, she's tougher than she looks.",
        "choices": [
          {
            "label": "About Raphael",
            "nextState": "talk_raphael"
          },
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      },
      "talk_raphael": {
        "text": "Raphael? We've been engaged for seven years. He's... steady. Reliable. Not exactly thrilling, but a girl needs stability in these dark times, doesn't she?",
        "choices": [
          {
            "label": "Ask about Quest",
            "nextState": "quest_router"
          },
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      },
      "quest_router": {
        "condition": "questStatus:golden_promise:completed",
        "trueState": "quest_complete",
        "falseState": "quest_offer_router"
      },
      "quest_offer_router": {
        "condition": "questStatus:golden_promise:active",
        "trueState": "quest_active",
        "falseState": "quest_offer"
      },
      "quest_offer": {
        "text": "Actually, I need a favor. There's a rare undead prowling the lower floors... rumor has it, it wears a pure gold band. Bring it to me. I need raw material for... a project.",
        "choices": [
          {
            "label": "I'll do it",
            "action": "quest",
            "questId": "golden_promise",
            "acceptState": "quest_active",
            "declineState": "default"
          },
          {
            "label": "Too dangerous",
            "nextState": "default"
          }
        ]
      },
      "quest_active": {
        "text": "The signet I'm after is pristine gold. If you find an Untarnished Signet, bring it straight to me.",
        "condition": "hasItem:untarnished_signet",
        "trueState": "quest_turnin",
        "choices": [
          {
            "label": "Remind me",
            "action": "quest",
            "questId": "golden_promise"
          },
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      },
      "quest_turnin": {
        "text": "You found the signet? Hand it here — I'll make it shine.",
        "choices": [
          {
            "label": "Give the signet",
            "action": "questComplete",
            "questId": "golden_promise",
            "completeState": "quest_complete"
          },
          {
            "label": "Not yet",
            "nextState": "quest_active"
          }
        ]
      },
      "quest_complete": {
        "text": "This will do nicely. Here's your payment — and my respect. Few bring back what they promise.",
        "choices": [
          {
            "label": "Back",
            "nextState": "default"
          }
        ]
      }
    }
  },
  "npc_gate_guard": {
    "name": "Gate Guard",
    "initialState": "default",
    "layout": "visual_novel",
    "states": {
      "default": {
        "text": "Halt! The dungeon below is dangerous. Only authorized Summoners may pass.",
        "condition": "hasItem:guild_pass",
        "trueState": "allow_pass",
        "falseState": "deny_pass"
      },
      "allow_pass": {
        "text": "I see you have a Guild Pass. Very well, proceed with caution.",
        "choices": [
          {
            "label": "Enter Dungeon",
            "action": "teleport",
            "target": "dungeon_floor_1"
          },
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      },
      "deny_pass": {
        "text": "You don't have a Guild Pass. Speak to the Guildmaster in town.",
        "choices": [
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_dungeon_merchant": {
    "name": "Wandering Merchant",
    "layout": "visual_novel",
    "initialState": "default",
    "states": {
      "default": {
        "text": "A friendly face in the dark! Care for some supplies? It's dangerous ahead.",
        "choices": [
          {
            "label": "Show me what you have",
            "action": "shop",
            "shopId": "dungeon_merchant"
          },
          {
            "label": "No thanks",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_weapon_shop": {
    "name": "Weaponsmith",
    "layout": "visual_novel",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Blades, hammers, axes. If it kills, I sell it.",
        "choices": [
          {
            "label": "Buy Weapons",
            "action": "shop",
            "shopId": "weapons_basic"
          },
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_auction": {
    "name": "Auctioneer",
    "layout": "visual_novel",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Rare finds! Highest bidder takes all! ...Well, actually, we just sell fixed price for now.",
        "choices": [
          {
            "label": "Browse",
            "action": "shop",
            "shopId": "auction_house"
          },
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_daphne": {
    "name": "Daphne",
    "layout": "visual_novel",
    "portrait": "NPC_Daphne",
    "initialState": "default",
    "states": {
      "default": {
        "text": "...",
        "choices": [
          {
            "label": "...",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_yukio": {
    "name": "Yukio",
    "layout": "visual_novel",
    "portrait": "NPC_Yukio",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Efficiency is key. Do not waste my time.",
        "choices": [
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_geraldo": {
    "name": "Geraldo",
    "layout": "visual_novel",
    "portrait": "NPC_Geraldo",
    "initialState": "default",
    "states": {
      "default": {
        "text": "Heh, you look like you've seen a ghost. Want to hear a story?",
        "choices": [
          {
            "label": "Leave",
            "action": "close"
          }
        ]
      }
    }
  },
  "npc_discussion": {
    "name": "Team Discussion",
    "layout": "visual_novel",
    "initialState": "part1",
    "states": {
      "part1": {
        "text": "Laura: Well, aren't we a sorry looking bunch today? The dungeon air does wonders for the complexion, really.",
        "speakers": [
            { "portrait": "NPC_Laura", "active": true },
            { "portrait": "NPC_Alicia", "active": false }
        ],
        "choices": [
            { "label": "Continue", "nextState": "part2" }
        ]
      },
      "part2": {
        "text": "Alicia: Laura! Be nice... they're doing their best! It's just... a bit scary down here.",
        "speakers": [
            { "portrait": "NPC_Laura", "active": false },
            { "portrait": "NPC_Alicia", "active": true }
        ],
        "choices": [
            { "label": "Continue", "nextState": "part3" }
        ]
      },
      "part3": {
        "text": "Laura: Scary? Darling, the only scary thing is the fashion sense of those goblins. Right, Summoner?",
        "speakers": [
            { "portrait": "NPC_Laura", "active": true, "emotion": "laughter" },
            { "portrait": "NPC_Alicia", "active": false }
        ],
        "choices": [
            { "label": "Agreed", "nextState": "part4" },
            { "label": "Focus, Laura", "nextState": "part4" }
        ]
      },
      "part4": {
         "text": "Alicia: ...I think we should keep moving.",
         "speakers": [
             { "portrait": "NPC_Laura", "active": false },
             { "portrait": "NPC_Alicia", "active": true, "emotion": "neutral" }
         ],
         "choices": [
             { "label": "Leave", "action": "close" }
         ]
      }
    }
  }
}
